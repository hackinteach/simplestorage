test_name: Simple Create-Delete-List Bucket

stages:
  - name: Create Bucket - Success
    request:
      url: http://localhost:8000/bucket1?create
      method: POST
    response:
      status_code: 200
      body:
        "name": bucket1

  - name: Create Bucket - Duplicate
    request:
      url: http://localhost:8000/bucket1?create
      method: POST
    response:
      status_code: 400

  - name: List Empty Bucket
    request:
      url: http://localhost:8000/bucket1?list
      method: GET
    response:
      status_code: 200
      body:
        "name": bucket1
        "objects": []

  - name: List non-exist Bucket
    request:
      url: http://localhost:8000/b1?list
      method: GET
    response:
      status_code: 400

  - name: Drop Bucket - Success
    request:
      url: http://localhost:8000/bucket1?delete
      method: DELETE
    response:
      status_code: 200
  - name: Drop Bucket - NOT FOUND
    request:
      url: http://localhost:8000/bucket1?delete
      method: DELETE
    response:
      status_code: 400

---

test_name: Create-Delete Object

stages:
  - name: Create Bucket
    request:
      url: http://localhost:8000/bucket1?create
      method: POST
    response:
      status_code: 200
      body:
        "name": bucket1

  - name : Create Object
    request:
      url: http://localhost:8000/bucket1/object1?create
      method: POST
    response:
      status_code: 200

  - name : Create Object - Duplicate
    request:
      url: http://localhost:8000/bucket1/object1?create
      method: POST
    response:
      status_code: 400

  - name: List Object
    request:
      url: http://localhost:8000/bucket1?list
      method: GET
    response:
      status_code: 200
      body:
        "name": bucket1
        "objects": [{"name":object1}]

  - name: Delete Object - Not exist
    request:
      url: http://localhost:8000/bucket1/nullObject?delete
      method: DELETE
    response:
      status_code: 400

  - name: Delete - Success
    request:
      url: http://localhost:8000/bucket1/object1?delete
      method: DELETE
    response:
      status_code: 200

  - name: List Object - No Object
    request:
      url: http://localhost:8000/bucket1?list
      method: GET
    response:
      status_code: 200
      body:
        "name": bucket1
        "objects": []
